{% extends 'base.html' %}

{% block title %}Zarejestruj się | TB twojbudzet.com{% endblock %}

{% block footer %}
    <script src="/js/hideShowPassword.min.js"></script>
    <script src="/js/app.js"></script>

    <script>
        $(document).ready(function() {

            /**
             * Validate the form
             */
            $('#formSignup').validate({
                rules: {
                    name: 'required',
                    email: {
                        required: true,
                        email: true,
                        remote: '/account/validate-email'
                    },
                    password: {
                        required: true,
                        minlength: 6,
                        validPassword: true
                    }
                },
                messages: {
                    email: {
                        remote: 'Adres emial jest już zajęty'
                    }
                }
            });


            /**
              * Show password toggle button
              */
            $('#inputPassword').hideShowPassword({
                show: false,
                innerToggle: 'focus'
            });
        });
    </script>

{% endblock %}

{% block body %}

    <h1>Zarejestruj się</h1>

    {% if user.errors is not empty %}
        <p>Błędy w formularzu:</p>
        <ul>
            {% for error in user.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

        <div class="row text-center bg-background my-6 p-sm-3 p-lg-0">

            <div class="col-lg-4 bg-white offset-lg-1 my-4 shadow p-3">

                <h1 class="h3 font-weight-bold my-4 nav-name">Rejestracja</h1>

                <form method="post" action="/signup/create" id="formSignup"> 

                    <div class="col-10 offset-md-1 input-group mb-4">

                        <div class="input-group-prepend">
                            <span class="input-group-text register-color"> 
                                <svg class="bi bi-people-circle" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 008 15a6.987 6.987 0 005.468-2.63z"/>
                                    <path fill-rule="evenodd" d="M8 9a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                    <path fill-rule="evenodd" d="M8 1a7 7 0 100 14A7 7 0 008 1zM0 8a8 8 0 1116 0A8 8 0 010 8z" clip-rule="evenodd"/>
                                </svg>    
                            </span>
                            
                        </div>

                        <input type="text" name="name" class="form-control" placeholder="*Login" id="inputName" autofocus value="{{ user.name }}" aria-label="login"
                        aria-describedby="login">

                    </div>
                
                    <div class="col-10 offset-md-1 input-group mb-4">

                        <div class="input-group-prepend">
                            <span class="input-group-text register-color"> ✉ </span>

                        </div>

                        <input type="text" name="email" class="form-control" placeholder="*Email" id="inputEmail" value="{{ user.email }}" aria-label="inputEmail"
                        aria-describedby="email">

                    </div>

                    <div class="col-10 offset-md-1 input-group mb-4">

                        <div class="input-group-prepend">

                            <span class="input-group-text register-color">
                                <svg class="bi bi-lock-fill" width="1em" height="1em" viewBox="0 0 16 16"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="11" height="9" x="2.5" y="7" rx="2" />
                                    <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z"
                                        clip-rule="evenodd" />
                                </svg>
                            </span>

                        </div>

                        <input type="password" name="password" class="form-control" placeholder="*Hasło" id="inputPassword" aria-label="inputPassword"
                            aria-describedby="Password">
                    
                    </div>

                    <button type="submit" class="btn btn-register my-3 mb-3">Zarejestruj się</button>
                
                    <p>*Pole wymagane</p>
      
                </form>

            </div>

            <div class="col-lg-4 bg-white my-4 offset-lg-2 offset-xs-0 shadow p-3">
                <h1 class="h3 font-weight-bold my-4  nav-name">Masz już konto? <br />Zaloguj się!</h1>
                <a href="/login">
                    <button type="submit" class="btn-login my-3 mb-3">Logowanie </button>
                </a>
                <p class="h4 font-weight-bold mb-2 mt-2">  </p>

            </div>
        </div>

{% endblock %}
